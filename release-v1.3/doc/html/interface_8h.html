<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TLx493D 3D Hall Sensor Generic Library: interface.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="IFX_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TLx493D 3D Hall Sensor Generic Library
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">Generic library for the TLx493D 3D Hall sensor family</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_50e1fa22dd7e6c7c58e7f1d8552c06cd.html">TLx493D</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">interface.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic Library interface to the peripheral drivers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="interface_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abb6da080fc2c3af066f84b6e5e789535"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#abb6da080fc2c3af066f84b6e5e789535">_I2C_read</a></td></tr>
<tr class="memdesc:abb6da080fc2c3af066f84b6e5e789535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (uint8_t addr, uint8_t *data, uint8_t count)  <a href="#abb6da080fc2c3af066f84b6e5e789535">More...</a><br /></td></tr>
<tr class="separator:abb6da080fc2c3af066f84b6e5e789535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7246a23c69b86702d92fdc47e6bce36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#ab7246a23c69b86702d92fdc47e6bce36">_I2C_write</a></td></tr>
<tr class="memdesc:ab7246a23c69b86702d92fdc47e6bce36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (uint8_t addr, const uint8_t* data, uint8_t count)  <a href="#ab7246a23c69b86702d92fdc47e6bce36">More...</a><br /></td></tr>
<tr class="separator:ab7246a23c69b86702d92fdc47e6bce36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e255fbd0891d9589cc34ad66c6c99f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#a0e255fbd0891d9589cc34ad66c6c99f0">_I2C_recover</a>()</td></tr>
<tr class="memdesc:a0e255fbd0891d9589cc34ad66c6c99f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (void)  <a href="#a0e255fbd0891d9589cc34ad66c6c99f0">More...</a><br /></td></tr>
<tr class="separator:a0e255fbd0891d9589cc34ad66c6c99f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8cef12db083155e8acaeb87ad082d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#a4d8cef12db083155e8acaeb87ad082d4">_I2C_reset</a>()</td></tr>
<tr class="memdesc:a4d8cef12db083155e8acaeb87ad082d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (void)  <a href="#a4d8cef12db083155e8acaeb87ad082d4">More...</a><br /></td></tr>
<tr class="separator:a4d8cef12db083155e8acaeb87ad082d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32351c63a8df7f89a4e048593a5e78cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#a32351c63a8df7f89a4e048593a5e78cf">_SET_ADDR_AND_WAIT</a>(high)</td></tr>
<tr class="memdesc:a32351c63a8df7f89a4e048593a5e78cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (bool high)  <a href="#a32351c63a8df7f89a4e048593a5e78cf">More...</a><br /></td></tr>
<tr class="separator:a32351c63a8df7f89a4e048593a5e78cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049c9e0574db2668751f73dcacaacfe7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#a049c9e0574db2668751f73dcacaacfe7">_POWER_ENABLE</a>()</td></tr>
<tr class="memdesc:a049c9e0574db2668751f73dcacaacfe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (void)  <a href="#a049c9e0574db2668751f73dcacaacfe7">More...</a><br /></td></tr>
<tr class="separator:a049c9e0574db2668751f73dcacaacfe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abadb0076439c5df777bd4e545d82dcce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#abadb0076439c5df777bd4e545d82dcce">_POWER_DISABLE</a>()</td></tr>
<tr class="memdesc:abadb0076439c5df777bd4e545d82dcce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (void)  <a href="#abadb0076439c5df777bd4e545d82dcce">More...</a><br /></td></tr>
<tr class="separator:abadb0076439c5df777bd4e545d82dcce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f176877e2df75035e449d4be3363a8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_8h.html#a6f176877e2df75035e449d4be3363a8d">_LOG_STR</a>(buff,  len)</td></tr>
<tr class="memdesc:a6f176877e2df75035e449d4be3363a8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Header: (void *data, uint32_t count)  <a href="#a6f176877e2df75035e449d4be3363a8d">More...</a><br /></td></tr>
<tr class="separator:a6f176877e2df75035e449d4be3363a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generic Library interface to the peripheral drivers. </p>
<p>The purpose of this file is to connect microcontroller dependent functions to the generic TLx493D library which is microcontroller agnostic. The functions specified below are needed for the normal functioning of the sensor.</p>
<p>In order to interface the the TLx493D (this library) to some microcontroller, several functions need to be implemented and then they should be specified in this file (<a class="el" href="interface_8h.html" title="Generic Library interface to the peripheral drivers. ">interface.h</a>). For example, in order to implement reading from the I2C bus, which is needed by the library, a function like the following is required: </p><div class="fragment"><div class="line">int32_t I2C_read_device_specific(uint8_t addr, uint8_t *data, uint8_t count) {</div><div class="line">    int32_t status;</div><div class="line"></div><div class="line">    <span class="comment">// Read from I2C and assign status variable</span></div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div></div><!-- fragment --><p> The this function should be specified below as such </p><div class="fragment"><div class="line"><span class="preprocessor">#define _I2C_read I2C_read_device_specific</span></div></div><!-- fragment --><p> Please refer to the following #defines for information about the required implementation.</p>
<p>Note: ALL I2C functions should return a positive value of type int32_t (defined in stdint.h) indicating some communication error or Zero(0) indicating a successful communication. The positive return values themselves, aside from indicating an error, are meaningless to the library and thus can be arbitrarily chosen by the user as seen fit. Negative return value are reserved and used internally by the generic library, thus no function referred in this library should return a negative error as it may collide with the library reserved return value! </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="abb6da080fc2c3af066f84b6e5e789535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb6da080fc2c3af066f84b6e5e789535">&#9670;&nbsp;</a></span>_I2C_read</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _I2C_read</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (uint8_t addr, uint8_t *data, uint8_t count) </p>
<p>I2C read command must have a header precisely of type: (uint8_t addr, uint8_t *data, uint8_t count): </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The I2C address of the sensor </td></tr>
    <tr><td class="paramname">data</td><td>The array that the function will read to </td></tr>
    <tr><td class="paramname">count</td><td>The number of bytes the function will read</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="comment">// =================== EXAMPLE ===================</span></div><div class="line"><span class="comment">// Read 10 bytes from the I2C device with address 0x63</span></div><div class="line"><span class="comment">// to the array data_ptr</span></div><div class="line"><span class="comment">// The error code will be written to error. On success</span></div><div class="line"><span class="comment">// it will be 0 (Zero).</span></div><div class="line">uint8_t data_ptr[10];</div><div class="line">error = <a class="code" href="interface_8h.html#abb6da080fc2c3af066f84b6e5e789535">_I2C_read</a>(0x23, data_ptr, 10);</div></div><!-- fragment --> 
</div>
</div>
<a id="a0e255fbd0891d9589cc34ad66c6c99f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e255fbd0891d9589cc34ad66c6c99f0">&#9670;&nbsp;</a></span>_I2C_recover</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _I2C_recover</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (void) </p>
<p>_I2C_recover should take no parameter. It will write the recover address (FF) on the I2C bus </p><div class="fragment"><div class="line"><span class="comment">// ============ EXAMPLE ==============</span></div><div class="line"><span class="comment">// Perform am I2C recovery command</span></div><div class="line"><a class="code" href="interface_8h.html#a0e255fbd0891d9589cc34ad66c6c99f0">_I2C_recover</a>();</div></div><!-- fragment --> 
</div>
</div>
<a id="a4d8cef12db083155e8acaeb87ad082d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8cef12db083155e8acaeb87ad082d4">&#9670;&nbsp;</a></span>_I2C_reset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _I2C_reset</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (void) </p>
<p>_I2C_reset should take no parameter. It will write the reset address (00) on the I2C bus </p><div class="fragment"><div class="line"><span class="comment">// ============ EXAMPLE ==============</span></div><div class="line"><span class="comment">// Perform am I2C reset command</span></div><div class="line"><a class="code" href="interface_8h.html#a4d8cef12db083155e8acaeb87ad082d4">_I2C_reset</a>();</div></div><!-- fragment --> 
</div>
</div>
<a id="ab7246a23c69b86702d92fdc47e6bce36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7246a23c69b86702d92fdc47e6bce36">&#9670;&nbsp;</a></span>_I2C_write</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _I2C_write</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (uint8_t addr, const uint8_t* data, uint8_t count) </p>
<p>I2C write command must have a header precisely of type: (uint8_t addr, const uint8_t* data, uint8_t count), where: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Is the I2C address to read from data is the; </td></tr>
    <tr><td class="paramname">data</td><td>is the array that the function will read to </td></tr>
    <tr><td class="paramname">count</td><td>is the number of bytes the function will read</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="comment">// =============== EXAMPLE ================</span></div><div class="line">uint8_t payload[] = {5, 1, 2, 3};</div><div class="line"><span class="comment">// write 4 bytes from payload to the I2C device with address 0x23</span></div><div class="line">error = <a class="code" href="interface_8h.html#ab7246a23c69b86702d92fdc47e6bce36">_I2C_write</a>(0x23, payload, 4);</div></div><!-- fragment --> 
</div>
</div>
<a id="a6f176877e2df75035e449d4be3363a8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f176877e2df75035e449d4be3363a8d">&#9670;&nbsp;</a></span>_LOG_STR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _LOG_STR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buff, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (void *data, uint32_t count) </p>
<p>Offers a method to log a string. The header of the method should be of type (void *data, uint32_t count) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>An array of unit8_t to be written </td></tr>
    <tr><td class="paramname">count</td><td>The number of bytes to be written <div class="fragment"><div class="line"><span class="comment">// ============ EXAMPLE ==============</span></div><div class="line"><span class="comment">// log the string &#39;Example&#39;</span></div><div class="line"><a class="code" href="interface_8h.html#a6f176877e2df75035e449d4be3363a8d">_LOG_STR</a>(<span class="stringliteral">&quot;Example&quot;</span>, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;Example&quot;</span>) - 1);</div></div><!-- fragment --> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abadb0076439c5df777bd4e545d82dcce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abadb0076439c5df777bd4e545d82dcce">&#9670;&nbsp;</a></span>_POWER_DISABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _POWER_DISABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (void) </p>
<p>Set the pin responsible with supplying the sensor voltage to LOW. The function will be called with no arguments. </p><div class="fragment"><div class="line"><span class="comment">// ============ EXAMPLE ==============</span></div><div class="line"><span class="comment">// Power Down the sensor</span></div><div class="line"><a class="code" href="interface_8h.html#abadb0076439c5df777bd4e545d82dcce">_POWER_DISABLE</a>();</div></div><!-- fragment --> 
</div>
</div>
<a id="a049c9e0574db2668751f73dcacaacfe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a049c9e0574db2668751f73dcacaacfe7">&#9670;&nbsp;</a></span>_POWER_ENABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _POWER_ENABLE</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (void) </p>
<p>Set the pin responsible with supplying the sensor voltage to HIGH. The function will be called with no arguments. </p><div class="fragment"><div class="line"><span class="comment">// ============ EXAMPLE ==============</span></div><div class="line"><span class="comment">// Power Up the sensor</span></div><div class="line"><a class="code" href="interface_8h.html#a049c9e0574db2668751f73dcacaacfe7">_POWER_ENABLE</a>();</div></div><!-- fragment --> 
</div>
</div>
<a id="a32351c63a8df7f89a4e048593a5e78cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32351c63a8df7f89a4e048593a5e78cf">&#9670;&nbsp;</a></span>_SET_ADDR_AND_WAIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _SET_ADDR_AND_WAIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">high</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function Header: (bool high) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">high</td><td>A value of <b> true </b> will set the ADDR pin HIGH at sensor power up, and a value of <b> false </b> will set the ADDR pin to LOW at sensor power up.</td></tr>
  </table>
  </dd>
</dl>
<p>Set the desired level on ADDR(SDA) pin and wait at least 200us. Header should be of type (bool high) where: <a class="el" href="interface_8h.html#a32351c63a8df7f89a4e048593a5e78cf" title="Function Header: (bool high) ">_SET_ADDR_AND_WAIT(true)</a> will set the ADDR(SDA) line to HIGH and then wait for at least 200us. <a class="el" href="interface_8h.html#a32351c63a8df7f89a4e048593a5e78cf" title="Function Header: (bool high) ">_SET_ADDR_AND_WAIT(false)</a> will set the ADDR(SDA) line to LOW and then wait for at least 200us. Finally, the SDA line should be set back to HIGH. </p><div class="fragment"><div class="line"><span class="comment">// =========== EXAMPLE ===========</span></div><div class="line"><span class="comment">// set voltage on ADDR pin to low and wait for sensor startup</span></div><div class="line"><a class="code" href="interface_8h.html#a32351c63a8df7f89a4e048593a5e78cf">_SET_ADDR_AND_WAIT</a>(<span class="keyword">false</span>);</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
